document.querySelectorAll(".calculator__btn").forEach(a=>a.addEventListener("click",a=>{calculate(a)})),window.addEventListener("keydown",a=>{if(!isNaN(+a.key&&"0"!==a.key))calculate(a,a.key);else switch(a.key){case"Backspace":calculate(a,"del");break;case"=":calculate(a,"=");break;case"+":calculate(a,"+");break;case"-":calculate(a,"-");break;case"c":calculate(a,"C");break;case"C":calculate(a,"C");break;case"/":calculate(a,"\xF7");break;case"*":calculate(a,"*");break;case"0":calculate(a,"0");break;case".":calculate(a,".");}});function calculate(a,b){function c(c,g){const h=c.indexOf(" ")+1,i=c.substring(h),j=+c.substr(0,h),a=+g;let b;return"%"===i?b=j*(a/100):"\xF7"===i?b=j/a:"*"===i?b=j*a:"-"===i?b=j-a:"+"===i?b=j+a:void 0,e.textContent=b,f.textContent="","Infinity"===e.textContent?(e.style.fontSize="25px",void(e.textContent="NIE mo\u017Cna dzieli\u0107 przez 0!")):void d(j,i,b,a)}function d(c,a,d,e){const b=document.querySelector(".calculator__historyContent"),f=document.querySelector(".calculator__historyDelete");f.classList.remove("calculator__historyDelete--hide");const g=document.createElement("p");g.textContent=e||0===e?`${c} ${a} ${e} = ${d}`:"\xB2"===a?`${c}${a} = ${d}`:`${a}${c} = ${d}`,b.append(g),f.addEventListener("click",()=>{const a=document.querySelectorAll(".calculator__historyContent p");a.forEach(a=>a.remove()),f.classList.add("calculator__historyDelete--hide")})}const e=document.querySelector(".calculator__displayValue"),f=document.querySelector(".calculator__displayPrevValue"),g=b||a.target.textContent,h=isNaN(+g)?g:+g,i=Array.from(e.textContent);let j=!1;if(("Przepe\u0142nienie"===e.textContent||"NIE mo\u017Cna dzieli\u0107 przez 0!"===e.textContent||"NIE ma takiej liczby!"===e.textContent)&&(j=!0),"number"==typeof h)"0"===e.textContent||j?e.textContent=h:21>=i.length&&(e.textContent+=h);else{let b=e.textContent;switch(h){case"CE":e.textContent="0";break;case"C":e.textContent="0",f.textContent="";break;case"del":if(j)break;i.pop(),e.textContent=+i.join("");break;case"1/x":if(j)break;if(e.textContent=1/b,"Infinity"===e.textContent){e.textContent="NIE mo\u017Cna dzieli\u0107 przez 0!";break}d(b,"1/",e.textContent);break;case"x\xB2":if(j)break;if(e.textContent=b*b,"Infinity"===e.textContent){e.textContent="Przepe\u0142nienie";break}d(b,"\xB2",e.textContent);break;case"\u221Ax":if(j)break;if(e.textContent=Math.pow(b,.5),"NaN"===e.textContent){e.textContent="NIE ma takiej liczby!";break}d(b,"\u221A",e.textContent);break;case"+/-":if(j)break;e.textContent=-1*b;break;case".":if(j)break;i.includes(".")||(e.textContent+=".");break;case"=":""!==f.textContent&&c(f.textContent,e.textContent);break;default:if(j)break;else""===f.textContent&&(f.textContent=`${e.textContent} ${g}`,e.textContent="0");}}e.style.fontSize=10<Array.from(e.textContent).length?"25px":"35px"}