const submitBtn=document.querySelector(".form__btn"),inputs=document.querySelectorAll("input"),inputOwnerName=document.querySelector("#card-name"),inputCardNumber=document.querySelector("#card-number"),inputCardExpMonth=document.querySelector("#card-exp-month"),inputCardExpYear=document.querySelector("#card-exp-year"),inputCardCVC=document.querySelector("#card-cvc"),cardOwnerName=document.querySelector(".card__front-name"),cardNumber=document.querySelector(".card__front-number"),cardExpMonth=document.querySelector(".card__front-date-exp-month"),cardExpYear=document.querySelector(".card__front-date-exp-year"),cardCVC=document.querySelector(".card__back-cvc"),owner={input:inputOwnerName,card:cardOwnerName,placeholder:"JANE APPLESSED",inputMaxLength:25},number={input:inputCardNumber,card:cardNumber,placeholder:"0000 0000 0000 0000",inputMaxLength:16},expMonth={input:inputCardExpMonth,card:cardExpMonth,placeholder:"00",inputMaxLength:2},expYear={input:inputCardExpYear,card:cardExpYear,placeholder:"00",inputMaxLength:2},cvc={input:inputCardCVC,card:cardCVC,placeholder:"000",inputMaxLength:3},cardInfo=[owner,number,expMonth,expYear,cvc];function validateForm(){function a(a){return!(""!==a.value)&&(d(a,a.nextElementSibling,"Can't be blank"),!0)}function b(a,b){const c=Array.from(a.value),e=c.length<b;return!!e&&(d(a,a.nextElementSibling,`Required length: ${b}!`),!0)}function c(a){const b=+a.value;return!!isNaN(b)&&(d(a,a.nextElementSibling,"Wrong format, numbers only"),!0)}function d(a,b,c){a.classList.add("form__input--error"),showElement(b),b.textContent=c}(function(){const a=document.querySelectorAll(".form__error");a.forEach(a=>hideElement(a)),inputs.forEach(a=>a.classList.remove("form__input--error"))})();a(inputOwnerName)||a(inputCardNumber)||c(inputCardNumber)||b(inputCardNumber,16)||a(inputCardExpMonth)||a(inputCardExpYear)||a(inputCardCVC)||c(inputCardCVC)||b(inputCardCVC,3)||showCompleteSection()}function displayCardInfoFromInput(a){const{input:b,card:c,placeholder:d,inputMaxLength:e}=a,f=Array.from(b.value),g=""===b.value,h=f.length>e;if(g)return void(c.textContent=d);h&&(f.pop(),b.value=f.join(""));c.textContent=b.value}function addGapInCardNumber(){const a=Array.from(inputCardNumber.value);if(""===inputCardNumber.value)return void(cardNumber.textContent="0000 0000 0000 0000");for(let b=0;b<a.length;b++)0==b%4&&0!==b&&(a[b-1]+=" ");cardNumber.textContent=a.join("")}function addZeroBeforeNumber(a,b){10>a.value&&""!==a.value&&(b.textContent="0"+b.textContent)}function showCompleteSection(){const a=document.querySelector(".form"),b=document.querySelector(".complete"),c=document.querySelector(".complete__btn");hideElement(a),showElement(b),c.addEventListener("click",()=>{document.location.reload()})}function showElement(a){a.classList.remove(`${a.classList[0]}--hide`)}function hideElement(a){a.classList.add(`${a.classList[0]}--hide`)}inputs.forEach((a,b)=>a.addEventListener("input",()=>displayCardInfoFromInput(cardInfo[b]))),submitBtn.addEventListener("click",validateForm),inputCardNumber.addEventListener("input",addGapInCardNumber),inputCardExpYear.addEventListener("input",()=>addZeroBeforeNumber(inputCardExpYear,cardExpYear)),inputCardExpMonth.addEventListener("input",()=>{12<inputCardExpMonth.value?inputCardExpMonth.value=12:1>inputCardExpMonth.value&&(inputCardExpMonth.value=""),addZeroBeforeNumber(inputCardExpMonth,cardExpMonth)});