displayCountries();let theme=localStorage.getItem("theme");"dark"===theme?document.body.classList.add("dark"):document.body.classList.add("light");const themeBtn=document.querySelector(".header__changeThemeBtn"),filterSelect=document.querySelector(".field__filterSelect"),searchInput=document.querySelector(".field__searchInput");let btnContent="",inputValue="";searchInput.addEventListener("input",b=>{inputValue=b.target.value,filterCountries(btnContent,inputValue)}),filterSelect.addEventListener("click",()=>{const c=document.querySelector(".field__filterUl"),a=document.querySelectorAll(".field__filterBtn");c.classList.toggle("field__filterUl--hide"),a.forEach(b=>b.addEventListener("click",()=>{btnContent=b.textContent,filterSelect.textContent=btnContent,filterCountries(btnContent,inputValue)})),window.addEventListener("click",a=>{a.target.classList.contains("field__filterUl")||a.target.classList.contains("field__filterSelect")||c.classList.add("field__filterUl--hide")})}),themeBtn.addEventListener("click",()=>{const b=document.querySelector(".header__changeThemeBtnIcon");"dark"===theme?(document.body.classList.remove("dark"),document.body.classList.add("light"),b.name="moon-outline",theme="light"):(document.body.classList.remove("light"),document.body.classList.add("dark"),b.name="moon",theme="dark"),localStorage.setItem("theme",theme)});async function getCountriesData(){try{const c=await fetch("https://restcountries.com/v3.1/all"),a=await c.json();return await a}catch(a){console.error(a)}}function filterCountries(h,i){function b(e,a){let b=!0;for(let c=0;c<=a.length;c++)e.toLocaleLowerCase()===a.toLocaleLowerCase().slice(0,c)&&(b=!1);return b}const c=document.querySelectorAll(".country");c.forEach(a=>{if(""===h&&""===i)return void c.forEach(b=>b.classList.remove("country--hide"));const d=a.childNodes[1].childNodes[2].childNodes[1].textContent,e=a.childNodes[1].childNodes[0].textContent;"America"===h?h="Americas":h,""===h&&""!==i?b(i,e)?a.classList.add("country--hide"):a.classList.remove("country--hide"):""!==h&&""===i?d===h?a.classList.remove("country--hide"):a.classList.add("country--hide"):b(i,e)||d!==h?a.classList.add("country--hide"):a.classList.remove("country--hide")})}async function displayCountries(){function i(o){const a=document.querySelector(".main__homeInputs"),b=document.querySelector(".main__details");z.classList.add("main__homeContent--hide"),a.classList.add("main__homeInputs--hide"),b.classList.remove("main__details--hide");const p=document.querySelector(".main__detailsBackBtn");p.addEventListener("click",()=>{b.classList.add("main__details--hide"),z.classList.remove("main__homeContent--hide"),a.classList.remove("main__homeInputs--hide")});const q=document.querySelector(".details__img");q.src=g[o],q.alt=`Flag of ${A[o]}`,document.querySelector(".details__name").textContent=A[o];const r=[c[o],e[o],h[o],f[o],j[o],m[o],l[o],k[o]],s=document.querySelectorAll(".country__detailsInfoData");s.forEach((c,a)=>c.textContent=r[a]);const u=document.querySelector(".details__borderCountriesBtns"),v=document.querySelector(".details__message");if(v.classList.add("details__message--hide"),u.textContent="",n[o])for(let b=0;b<n[o].length;b++){const a=document.createElement("button");a.classList.add("details__borderCountryBtn");let c;for(let a in t)if(t[a].cca3===n[o][b]){c=t[a].name.common;break}a.textContent=c,a.setAttribute("data-cca3",n[o][b]),u.append(a)}else v.classList.remove("details__message--hide");const w=document.querySelectorAll(".details__borderCountryBtn");w.forEach(a=>a.addEventListener("click",a=>{const b=a.target.dataset.cca3;i(d.indexOf(b))}))}function s(d){const a=document.createElement("div");a.classList.add("country"),a.id=`country${d}`,a.setAttribute("tabindex","0");const b=document.createElement("img");b.classList.add("country__flag"),b.src=g[d],b.alt=`Flag of ${A[d]}`,a.append(b);const l=document.createElement("article");l.classList.add("country__infoContainer");const c=document.createElement("h2");c.classList.add("country__name"),c.textContent=A[d],l.append(c);const f=["Population: ","Region: ","Capital: "],i=[e[d],h[d],j[d]];for(let e=0;3>e;e++){const b=document.createElement("p");b.classList.add("country__info"),b.textContent=f[e];const a=document.createElement("span");a.classList.add("country__infoData"),a.textContent=i[e],b.append(a),l.append(b)}a.append(l),z.append(a)}const t=await getCountriesData(),z=document.querySelector(".main__homeContent"),A=[],c=[],e=[],g=[],h=[],f=[],j=[],k=[],l=[],m=[],n=[],d=[];for(let b=0;b<t.length;b++)d[b]=t[b].cca3;for(let o=0;o<t.length;o++){for(const a in t[o].name.nativeName){c[o]=t[o].name.nativeName[a].common;break}let a="";for(const c in t[o].currencies)a+=`${t[o].currencies[c].name}, `;l[o]=a.slice(0,a.length-2)||"Does not have";let d="";for(const a in t[o].languages)d+=`${t[o].languages[a]}, `;k[o]=d.slice(0,d.length-2)||"Does not have",A[o]=t[o].name.common,e[o]=t[o].population.toString();const i=[];for(let a=0;a<e[o].length;a++)0==a%3&&0!=a&&i.push(`,`),i.push(e[o][e[o].length-a-1]);e[o]=i.reverse().join(""),g[o]=t[o].flags.svg,h[o]=t[o].region,f[o]=t[o].subregion||"Does not have",j[o]=t[o].capital||"Does not have",m[o]=t[o].tld||"Does not have",n[o]=t[o].borders,s(o)}const a=document.querySelectorAll(".country");a.forEach((a,b)=>a.addEventListener("click",()=>{i(b)})),a.forEach((a,d)=>a.addEventListener("keydown",a=>{"Enter"===a.key&&i(d)})),document.querySelector(".main__homeContentSpin").classList.add("main__homeContentSpin--hide")}